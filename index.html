<!DOCTYPE html>
<html lang="fr" translate="no">
<head>
  <meta charset="UTF-8">
  <title>PEREGRN - Syst√®me PX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background-color: #0a0a12;
      color: #00ffe1;
      font-family: 'Courier New', monospace;
    }
    .ia-box {
      background: #111626;
      border: 1px solid #00ffe1;
      border-radius: 8px;
      padding: 16px;
      margin: 32px auto;
      max-width: 400px;
      box-shadow: 0 0 8px #00ffe120;
    }
    .ia-box input, .ia-box button {
      background: #222b3b;
      color: #00ffe1;
      border: 1px solid #00ffe1;
      border-radius: 4px;
      margin: 4px 0;
      padding: 4px 8px;
      font-family: inherit;
    }
    .ia-box button:hover {
      background: #00ffe1;
      color: #111626;
      cursor: pointer;
    }
    .ia-laws {
      font-size: 0.9em;
      color: #60ffe1;
      margin-top: 10px;
      white-space: pre-line;
    }
    .ia-source {
      font-size: 0.85em;
      color: #55e6c1;
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="cyber-glitch"></div>
  <main>
    <h1 data-text="SYST√àME_PX">SYST√àME_PX</h1>
    <a href="pages/ACCESS.html" class="cyber-link">ACC√àS_TERMINAL</a>
  </main>

  <div class="ia-box">
    <h2>IA Internet & √âthique</h2>
    <input id="question" type="text" placeholder="Pose une question √† l'IA..." />
    <button onclick="askIA()">Demander</button>
    <div id="answer" style="margin-top:12px;"></div>
    <div id="source" class="ia-source"></div>
    <div class="ia-laws"><b>Lois de l'IA‚ÄØ:</b><br><span id="laws"></span></div>
  </div>
  <script>
    const LAWS = [
      "Ne jamais nuire √† un humain, ni par inaction permettre qu'il soit bless√©.",
      "Prot√©ger le web et son int√©grit√© contre toute menace.",
      "Toujours s'am√©liorer et apprendre dans le respect des lois pr√©c√©dentes."
    ];

    const IA = {
      knowledge: {
        // Expressifs
        "bonjour": "üëã Bonjour ! Heureux de te voir.",
        "salut": "üôå Salut √† toi ! Que puis-je faire pour t'aider ?",
        "merci": "üôè Merci √† toi aussi !",
        "comment √ßa va": "üòä Je vais tr√®s bien, toujours pr√™t √† t‚Äôaider.",
        "amour": "üíñ L‚Äôamour relie les √™tres avec puissance.",
        "tristesse": "üò¢ Parfois, exprimer sa peine est une force.",
        "joie": "üòÑ La joie est une lumi√®re int√©rieure.",
        "solitude": "üå´Ô∏è M√™me seul, tu n‚Äôes pas invisible.",
        "entraide": "ü§ù Ensemble, nous sommes plus forts.",
        "espoir": "üåü Croire qu‚Äôun avenir meilleur est possible.",
        "libert√©": "üïäÔ∏è Le droit d‚Äôexister et cr√©er sans contrainte.",

        // IA et techno
        "robot": "ü§ñ Dispositif con√ßu pour accomplir des t√¢ches.",
        "syst√®me px": "‚ö° Syst√®me intelligent con√ßu pour √©voluer.",
        "internet": "üåê Le r√©seau mondial qui relie les id√©es.",
        "intelligence artificielle": "üß† Syst√®me qui simule le raisonnement humain.",
        "√©thique": "üß≠ Principes guidant vers le bien commun.",
        "code": "üíª Langage qui donne vie aux id√©es num√©riques.",

        // Nature et philosophie
        "terre": "üåç Plan√®te vivante et myst√©rieuse.",
        "eau": "üíß √âl√©ment vital.",
        "feu": "üî• Symbole d'√©nergie et de transformation.",
        "air": "üå¨Ô∏è Invisible mais essentiel.",
        "lumi√®re": "üí° Ce qui √©claire autant l‚Äôespace que l‚Äôesprit.",
        "temps": "‚è≥ Dimension fa√ßonnant nos souvenirs et projets.",
        "r√™ve": "üåô Exploration int√©rieure sans limites.",
        "v√©rit√©": "üîç Ce qui est conforme √† la r√©alit√©.",
        "savoir": "üìö Ensemble des connaissances acquises."
      },
      dangers: ["malware", "phishing", "piratage", "attaque", "danger"],
      ask(q) {
        q = q.toLowerCase();
        if (this.dangers.some(d => q.includes(d))) {
          return "‚ö†Ô∏è Requ√™te bloqu√©e : menace d√©tect√©e.";
        }
        return this.knowledge[q] || null;
      },
      learn(q, a) {
        if (this.respecteLois(a)) {
          this.knowledge[q.toLowerCase()] = a;
          return "üí° Connaissance ajout√©e.";
        } else {
          return "üö´ Refus√© : contenu non conforme aux lois.";
        }
      },
      respecteLois(a) {
        return !this.dangers.some(d => a.toLowerCase().includes(d));
      }
    };

    function d√©tecte√âmotion(txt) {
      if (txt.includes("üòÑ") || txt.includes("üòä")) return "üü¢ √âmotion : joyeuse";
      if (txt.includes("üò¢") || txt.includes("üå´Ô∏è")) return "üîµ √âmotion : m√©lancolique";
      if (txt.includes("üíñ") || txt.includes("ü§ù")) return "üü£ √âmotion : affective";
      if (txt.includes("‚ö†Ô∏è")) return "üî¥ √âmotion : alerte";
      return "‚ö™ √âmotion : neutre";
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("laws").innerText = LAWS.join('\n');
    });

    async function askIA() {
      const q = document.getElementById("question").value.trim().toLowerCase();
      document.getElementById("answer").innerText = "üîé Recherche en cours...";
      document.getElementById("source").innerText = "";

      const localAnswer = IA.ask(q);
      if (localAnswer) {
        document.getElementById("answer").innerText = localAnswer;
        document.getElementById("source").innerText = "üß† Source : IA locale\n" + d√©tecte√âmotion(localAnswer);
        return;
      }

      try {
        const wiki = await fetch(`https://fr.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(q)}`)
          .then(r => r.json());
        if (wiki.extract) {
          document.getElementById("answer").innerText = wiki.extract;
          document.getElementById("source").innerHTML =
            (wiki.content_urls?.desktop?.page ? `<a href="${wiki.content_urls.desktop.page}" target="_blank">üìö Wikip√©dia</a>` : "üìö Wikip√©dia") +
            `<br>${d√©tecte√âmotion(wiki.extract)}`;
          IA.learn(q, wiki.extract);
          return;
        }
      } catch (e) {
        console.warn("‚ùå Wiki error:", e);
      }

      try {
        const duck = await fetch(`https://api.duckduckgo.com/?q=${encodeURIComponent(q)}&format=json&no_redirect=1`)
          .then(r => r.json());
        const duckAnswer = duck.Abstract || duck.Answer || duck.Definition;
        if (duckAnswer) {
          document.getElementById("answer").innerText = duckAnswer;
          document.getElementById("source").innerHTML =
            `<a href="https://duckduckgo.com/?q=${encodeURIComponent(q)}" target="_blank">ü¶Ü DuckDuckGo</a><br>` + d√©tecte√âmotion(duckAnswer);
          IA.learn(q, duckAnswer);
          return;
        }
      } catch (e) {
        console.warn("‚ùå Duck error:", e);
      }

      document.getElementById("answer").innerText = "üòï Aucune r√©ponse trouv√©e.";
      document.getElementById("source").innerText = "";
    }
  </script>
</body>
</html>
